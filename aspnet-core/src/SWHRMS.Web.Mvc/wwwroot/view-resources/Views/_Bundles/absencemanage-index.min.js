(function(n){function s(i){var e=n("#row_"+i);abp.message.confirm(abp.utils.formatString(abp.localization.localize("AreYouSureWantToDelete","SWHRMS"),abp.localization.localize("ThisAbsence","SWHRMS")),function(n){n&&f.delete({id:i}).done(function(){t.row(e).remove().draw();r();u()})})}function h(f){var e=n("#row_"+f);abp.ui.setBusy(i);n.ajax({url:abp.appPath+"AbsencesManager/AbsenceApproval?absenceId="+f+"&status=1",type:"POST",contentType:"application/html",success:function(){e.find(".absence-status").html('<i class="material-icons" style="color:green;">check_box<\/i>');t.row(e).invalidate().draw();r();u()},error:function(){}}).done(function(){abp.ui.clearBusy(i)})}function c(f){var e=n("#row_"+f);abp.ui.setBusy(i);n.ajax({url:abp.appPath+"AbsencesManager/AbsenceApproval?absenceId="+f+"&status=2",type:"POST",contentType:"application/html",success:function(){e.find(".absence-status").html('<i class="material-icons" style="color:red;">check_box<\/i>');t.row(e).invalidate().draw();r();u()},error:function(){}}).done(function(){abp.ui.clearBusy(i)})}function r(){n.ajax({url:abp.appPath+"AbsencesManager/AbsenceCalendar",type:"GET",contentType:"application/html",success:function(n){e.html(n)},error:function(){}})}function u(){n.ajax({url:abp.appPath+"AbsencesManager/GetUserAbsenceTable",type:"GET",contentType:"application/html",success:function(n){o.html(n)},error:function(){}})}var f=abp.services.app.absence,i=n("#absenceManageTable"),e=n("#absenceCalendar"),o=n("#userAbsenceTable"),t=n("#jtable").DataTable({order:[],responsive:!0,columnDefs:[{width:"20%",targets:0}],fixedColumns:!0,autoWidth:!1});t.on("click","#delete-absence",function(){var t=n(this).attr("data-absence-id");s(t)});t.on("click","#approve-absence",function(t){t.preventDefault();var i=n(this).attr("data-absence-id");h(i)});t.on("click","#disapprove-absence",function(t){t.preventDefault();var i=n(this).attr("data-absence-id");c(i)})})(jQuery);